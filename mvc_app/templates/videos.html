{% extends "index.html" %}

{% block content %} <!-- for displaying below content in the index page -->

<div class="container mt-5">
  <h4 class="my-4">Trending Videos</h4>
  <div class="row justify-content-center g-3">
     {% for media in video %} <!-- loop starts and gets data from back-end -->
      <div class="col col-md-auto px-4">
         <div class="card shadow" loading="lazy">
          <p class="title" title="{{ media.Title }}"> {{ media.Title }}</p>
          <p class="date" title="{{ media.created_on }}"> {{ media.created_on }}</p>
            <video class="card-img" controls poster="{{ media.Thumbnail.url }}" title="{{ media.Description }}"
               src="{{ media.Media_link.url }}" type="video/mp4" loading="lazy" autopictureinpicture="true" preload="none">
            </video>
            <div class="d-flex flex-row">
              {% for likes in favourite_get %}
                <div class="p-2" title="{{ likes.popularity }}">
                  <i onclick="myFunction(this)" class="fa fa-heart-o">
                  </i>
                  <p class="mx-auto">{{ likes.popularity }} likes</p>
                </div>
              {% endfor %}
              <div class="p-2" title="Share to Facebook">
                <a href="https://www.facebook.com/sharer/sharer.php?href='{{media.Title}},{{media.Thumbnail}}'" target="_blank">
                  <i class="fa fa-share-alt share"></i>
                  <p class="mx-auto">share</p>
                </a>
              </div>
            </div>
        </div>
      </div>
      {% endfor %}<!-- loop ends -->
  </div>
</div>

{% endblock content %}

{% block scripts %}
  <script>
    function myFunction(x) {
      x.classList.toggle("fa-heart");
      x.classList.toggle("fa-heart-o");
    }
  </script>
{% endblock scripts %}